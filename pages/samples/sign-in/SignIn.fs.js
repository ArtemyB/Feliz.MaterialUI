import{Record,Union}from"../../../../src/fable_modules/fable-library.3.7.18/Types.js";import{record_type,bool_type,union_type,string_type}from"../../../../src/fable_modules/fable-library.3.7.18/Reflection.js";import{FSharpResult$2}from"../../../../src/fable_modules/fable-library.3.7.18/Choice.js";import{isMatch}from"../../../../src/fable_modules/fable-library.3.7.18/RegExp.js";import{Cmd_none}from"../../../../src/fable_modules/Fable.Elmish.4.0.0-beta-3/cmd.fs.js";import{OfAsyncWith_result}from"../../../../src/fable_modules/Fable.Elmish.4.0.0-beta-3/./cmd.obsolete.fs.js";import{Cmd_OfAsync_start}from"../../../../src/fable_modules/Fable.Elmish.4.0.0-beta-3/./cmd.fs.js";import{singleton}from"../../../../src/fable_modules/fable-library.3.7.18/AsyncBuilder.js";import{sleep}from"../../../../src/fable_modules/fable-library.3.7.18/Async.js";import{StyleCreator$1_$ctor,StyleImports_makeStyles_get}from"../../../../../src/Feliz.MaterialUI/./Styles.fs.js";import{StyleCreator$1__create_4EAC9E1E}from"../../../../../src/Feliz.MaterialUI/Styles.fs.js";import{singleton as singleton_1,ofArray}from"../../../../src/fable_modules/fable-library.3.7.18/List.js";import{useFeliz_React__React_useElmish_Static_B42E862}from"../../../../src/fable_modules/Feliz.UseElmish.1.6.0/UseElmish.fs.js";import{MuiHelpers_createElement}from"../../../../../src/Feliz.MaterialUI/./Mui.fs.js";import{Link,Grid,Button,Checkbox,FormControlLabel,TextField,Typography,Avatar,CircularProgress,Container}from"@mui/material";import{createElement}from"react";import*as react from"react";import{createObj}from"../../../../src/fable_modules/fable-library.3.7.18/Util.js";import{empty,singleton as singleton_2,append,delay,toList}from"../../../../src/fable_modules/fable-library.3.7.18/Seq.js";import LockOutlined from"@mui/icons-material/LockOutlined";import{Interop_reactApi}from"../../../../src/fable_modules/Feliz.1.68.0/./Interop.fs.js";import{Browser_Types_Event__Event_get_Checked,Browser_Types_Event__Event_get_Value}from"../../../../../src/Feliz.MaterialUI/../../docs-app/src/fable_modules/Fable.React.8.0.1/Fable.React.Extensions.fs.js";export class Domain_ValidEmail extends Union{constructor(e,...r){super(),this.tag=0|e,this.fields=r}cases(){return["ValidEmail"]}}export function Domain_ValidEmail$reflection(){return union_type("Samples.Samples.SignIn.SignIn.Domain.ValidEmail",[],Domain_ValidEmail,(()=>[[["Item",string_type]]]))}export function Domain_ValidEmail_Create_Z721C83C5(e){return""===e?new FSharpResult$2(1,"Required"):isMatch(/\w+@\w+\.\w+/gu,e)?new FSharpResult$2(0,new Domain_ValidEmail(0,e)):new FSharpResult$2(1,"Enter a valid email address")}export class Domain_ValidPassword extends Union{constructor(e,...r){super(),this.tag=0|e,this.fields=r}cases(){return["ValidPassword"]}}export function Domain_ValidPassword$reflection(){return union_type("Samples.Samples.SignIn.SignIn.Domain.ValidPassword",[],Domain_ValidPassword,(()=>[[["Item",string_type]]]))}export function Domain_ValidPassword_Create_Z721C83C5(e){return""===e?new FSharpResult$2(1,"Required"):new FSharpResult$2(0,new Domain_ValidPassword(0,e))}export class Domain_SubmitData extends Record{constructor(e,r,a){super(),this.Email=e,this.Password=r,this.RememberMe=a}}export function Domain_SubmitData$reflection(){return record_type("Samples.Samples.SignIn.SignIn.Domain.SubmitData",[],Domain_SubmitData,(()=>[["Email",Domain_ValidEmail$reflection()],["Password",Domain_ValidPassword$reflection()],["RememberMe",bool_type]]))}export class Model extends Record{constructor(e,r,a,t,s,n){super(),this.EmailAddress=e,this.ValidateEmailAddress=r,this.Password=a,this.ValidatePassword=t,this.RememberMe=s,this.IsBusy=n}}export function Model$reflection(){return record_type("Samples.Samples.SignIn.SignIn.Model",[],Model,(()=>[["EmailAddress",string_type],["ValidateEmailAddress",bool_type],["Password",string_type],["ValidatePassword",bool_type],["RememberMe",bool_type],["IsBusy",bool_type]]))}export class Msg extends Union{constructor(e,...r){super(),this.tag=0|e,this.fields=r}cases(){return["SetEmailAddress","EnableValidateEmailAddress","SetPassword","EnableValidatePassword","SetRememberMe","SubmitInvalid","SubmitValid","SignInCompleted"]}}export function Msg$reflection(){return union_type("Samples.Samples.SignIn.SignIn.Msg",[],Msg,(()=>[[["Item",string_type]],[],[["Item",string_type]],[],[["Item",bool_type]],[],[["Item",Domain_SubmitData$reflection()]],[]]))}export const init=new Model("",!1,"",!1,!1,!1);export function update(e,r){return 1===e.tag?[new Model(r.EmailAddress,!0,r.Password,r.ValidatePassword,r.RememberMe,r.IsBusy),Cmd_none()]:2===e.tag?[new Model(r.EmailAddress,r.ValidateEmailAddress,e.fields[0],r.ValidatePassword,r.RememberMe,r.IsBusy),Cmd_none()]:3===e.tag?[new Model(r.EmailAddress,r.ValidateEmailAddress,r.Password,!0,r.RememberMe,r.IsBusy),Cmd_none()]:4===e.tag?[new Model(r.EmailAddress,r.ValidateEmailAddress,r.Password,r.ValidatePassword,e.fields[0],r.IsBusy),Cmd_none()]:5===e.tag?[new Model(r.EmailAddress,!0,r.Password,!0,r.RememberMe,r.IsBusy),Cmd_none()]:6===e.tag?r.IsBusy?[r,Cmd_none()]:[new Model(r.EmailAddress,r.ValidateEmailAddress,r.Password,r.ValidatePassword,r.RememberMe,!0),OfAsyncWith_result((e=>{Cmd_OfAsync_start(e)}),singleton.Delay((()=>singleton.Bind(sleep(1e3),(()=>singleton.Return(new Msg(7)))))))]:7===e.tag?[new Model(r.EmailAddress,r.ValidateEmailAddress,r.Password,r.ValidatePassword,r.RememberMe,!1),Cmd_none()]:[new Model(e.fields[0],r.ValidateEmailAddress,r.Password,r.ValidatePassword,r.RememberMe,r.IsBusy),Cmd_none()]}export const useStyles=StyleImports_makeStyles_get((()=>{let e;const r=StyleCreator$1_$ctor();return e=e=>{const a=StyleCreator$1__create_4EAC9E1E(r,ofArray([["marginTop",e.spacing(8)],["display","flex"],["flexDirection","column"],["alignItems","center"]])),t=StyleCreator$1__create_4EAC9E1E(r,singleton_1(["margin",e.spacing(1)]));return{avatar:StyleCreator$1__create_4EAC9E1E(r,ofArray([["margin",e.spacing(1)],["backgroundColor",e.palette.primary.main]])),form:StyleCreator$1__create_4EAC9E1E(r,ofArray([["width","100%"],["marginTop",e.spacing(1)]])),paper:a,progressBar:t,submit:StyleCreator$1__create_4EAC9E1E(r,singleton_1(["margin",e.spacing(3,0,2)]))}},r=>{const a=e(r);return Object.assign({},a)}})());export function SignIn(e){let r,a;const t=useFeliz_React__React_useElmish_Static_B42E862((()=>[init,Cmd_none()]),update,[e.$key]),s=t[0],n=t[1],l=useStyles();return MuiHelpers_createElement(Container,[["component","main"],["maxWidth","xs"],(r=[createElement("div",createObj(ofArray([["className",l.paper],(a=toList(delay((()=>{let e,r;return append(s.IsBusy?singleton_2(MuiHelpers_createElement(CircularProgress,[["color","secondary"]])):singleton_2(MuiHelpers_createElement(Avatar,[(e=[(r={},react.createElement(LockOutlined,r))],["children",Interop_reactApi.Children.toArray(Array.from(e))])])),delay((()=>append(singleton_2(MuiHelpers_createElement(Typography,[["component","h1"],["variant","h5"],["children","Sign in"]])),delay((()=>{let e,r,a,t;return singleton_2(createElement("form",createObj(ofArray([["className",l.form],(e=[MuiHelpers_createElement(TextField,toList(delay((()=>append(singleton_2(["value",s.EmailAddress]),delay((()=>append(singleton_2(["onChange",e=>{n(new Msg(0,Browser_Types_Event__Event_get_Value(e)))}]),delay((()=>append(singleton_2(["variant","outlined"]),delay((()=>append(singleton_2(["margin","normal"]),delay((()=>append(singleton_2(["required",!0]),delay((()=>append(singleton_2(["fullWidth",!0]),delay((()=>append(singleton_2(["id","email"]),delay((()=>append(singleton_2(["label","Email Address"]),delay((()=>append(singleton_2(["name","email"]),delay((()=>append(singleton_2(["autoComplete","email"]),delay((()=>append(singleton_2(["autoFocus",!0]),delay((()=>append(singleton_2(["onBlur",e=>{n(new Msg(1))}]),delay((()=>{const e=[s.ValidateEmailAddress,Domain_ValidEmail_Create_Z721C83C5(s.EmailAddress)];let r,a;if(e[0]){const t=e[1];1===t.tag?(r=1,a=t.fields[0]):r=0}else r=0;switch(r){case 0:return empty();case 1:return append(singleton_2(["error",!0]),delay((()=>singleton_2(["helperText",a]))))}})))))))))))))))))))))))))))))))))))))))),MuiHelpers_createElement(TextField,toList(delay((()=>append(singleton_2(["value",s.Password]),delay((()=>append(singleton_2(["onChange",e=>{n(new Msg(2,Browser_Types_Event__Event_get_Value(e)))}]),delay((()=>append(singleton_2(["variant","outlined"]),delay((()=>append(singleton_2(["margin","normal"]),delay((()=>append(singleton_2(["required",!0]),delay((()=>append(singleton_2(["fullWidth",!0]),delay((()=>append(singleton_2(["id","password"]),delay((()=>append(singleton_2(["label","Password"]),delay((()=>append(singleton_2(["name","password"]),delay((()=>append(singleton_2(["type","password"]),delay((()=>append(singleton_2(["autoComplete","current-password"]),delay((()=>append(singleton_2(["onBlur",e=>{n(new Msg(3))}]),delay((()=>{const e=[s.ValidatePassword,Domain_ValidPassword_Create_Z721C83C5(s.Password)];let r,a;if(e[0]){const t=e[1];1===t.tag?(r=1,a=t.fields[0]):r=0}else r=0;switch(r){case 0:return empty();case 1:return append(singleton_2(["error",!0]),delay((()=>singleton_2(["helperText",a]))))}})))))))))))))))))))))))))))))))))))))))),MuiHelpers_createElement(FormControlLabel,[["label","Remember me"],["control",MuiHelpers_createElement(Checkbox,[["checked",s.RememberMe],["onChange",e=>{n(new Msg(4,Browser_Types_Event__Event_get_Checked(e)))}],["value","remember"],["color","primary"]])]]),MuiHelpers_createElement(Button,[["type","submit"],["fullWidth",!0],["variant","contained"],["color","primary"],["children","Sign In"],["disabled",s.IsBusy],["onClick",e=>{e.preventDefault();const r=[Domain_ValidEmail_Create_Z721C83C5(s.EmailAddress),Domain_ValidPassword_Create_Z721C83C5(s.Password)];let a,t,l;const i=r[0];if(0===i.tag){const e=r[1];0===e.tag?(a=0,t=i.fields[0],l=e.fields[0]):a=1}else a=1;switch(a){case 0:n(new Msg(6,new Domain_SubmitData(t,l,s.RememberMe)));break;case 1:n(new Msg(5))}}]]),MuiHelpers_createElement(Grid,[["container",!0],["sx",{justifyContent:"space-between"}],(r=[MuiHelpers_createElement(Grid,[["item",!0],["xs","auto"],(a=[MuiHelpers_createElement(Link,[["href","#"],["variant","body2"],["children","Forgot password?"],["onClick",e=>{e.preventDefault()}]])],["children",Interop_reactApi.Children.toArray(Array.from(a))])]),MuiHelpers_createElement(Grid,[["item",!0],(t=[MuiHelpers_createElement(Link,[["href","#"],["variant","body2"],["children","Don't have an account? Sign Up"],["onClick",e=>{e.preventDefault()}]])],["children",Interop_reactApi.Children.toArray(Array.from(t))])])],["children",Interop_reactApi.Children.toArray(Array.from(r))])])],["children",Interop_reactApi.Children.toArray(Array.from(e))])]))))}))))))}))),["children",Interop_reactApi.Children.toArray(Array.from(a))])])))],["children",Interop_reactApi.Children.toArray(Array.from(r))])])}